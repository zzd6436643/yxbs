$(function() {		//项目路径	var ctx = $('#ctx').val();		//bootstrap分页控件	var currentPageNum = parseInt($('#currentPage').val(), 10);	var totalPagesNum =  parseInt($('#totalPage').val(), 10);		var options = {		currentPage : currentPageNum,		totalPages : totalPagesNum,		numberOfPages : 8,		onPageClicked : function(event, originalEvent, type, page) {			var pageIndex = 0;			if (page < 1) {				pageIndex = 0;			} else {				pageIndex = page - 1;			}			if (page > totalPagesNum) {				pageIndex = totalPagesNum;			}			$('#pageIndex').val(pageIndex);			$('#userListForm').submit();		},		onPageChanged : function(event, oldPage, newPage) {			// alert(456);		}	};	if (currentPageNum != 0 && totalPagesNum != 0 && currentPageNum <= totalPagesNum) {		$('#pagination').bootstrapPaginator(options);	}		//bootstrap datepicker	$('#dpAlert').hide();	$('#dps').datepicker({		format: 'yyyy-mm-dd'	});	$('#dpe').datepicker({		format: 'yyyy-mm-dd'	});	$('#dps').datepicker().on('changeDate', function(ev){		var dpe = $('#dpe').val();		if (dpe!='') {		    var regEx = new RegExp("\\-","gi");		    dpe=dpe.replace(regEx,"/");			if (ev.date.valueOf() > new Date(Date.parse(dpe)).valueOf()){				$('#dps').val('');				$('#dpAlert').show().find('strong').text('开始日期大于结束日期');			} else {				$('#dpAlert').hide();			}		}	});	$('#dpe').datepicker().on('changeDate', function(ev){		var dps = $('#dps').val();		if (dps!='') {			var regEx = new RegExp("\\-","gi");			dps=dps.replace(regEx,"/");			if (ev.date.valueOf() < new Date(Date.parse(dps)).valueOf()){				$('#dpe').val('');				$('#dpAlert').show().find('strong').text('结束日期小于开始日期');			} else {				$('#dpAlert').hide();			}		}	});		//reset	$('#btnReset').on('click',function(){		$('#userId').val('');		$('#username').val('');		$('#displayIsenable').val('');		$('#role').val('');		$('#dps').val('');		$('#dpe').val('');	});		//autocomplete	var roles = [];	$.ajax({		type:'post',		async:true,//异步请求		url:ctx+"/userMgr/getRoleList",		success:function(data){			//console.log(JSON.stringify(data));			$.each(data,function(index,obj){				roles.unshift(obj);			});						$("#role").typeahead({				source:roles			});		}	});		//用户删除按钮	$(".delUserBtn").on('click',function(){		if (confirm("确定要清空数据吗？")){			var userId = $(this).attr('tag');			$.ajax({		    	async:false,		    	type:'post',		    	url:'/userMgr/deleteUser/'+userId,		    	success:function(data){		    		if(data&&data.optFlag==true){		    			alert(data.message);		    			window.location.reload(true);		    		}else if(data&&data.optFlag==false){		    			alert(data.message);		    		}else{		    			alert("error data format");		    		}		    	}			});		} else {			return;		}			});    	//关闭dialog时清空input	$('#newUserDialog').on('hide',function(){		$('#new_username').val('');		$('#new_passwd').val('');	});		$('#modifyPasswdDialog').on('hide',function(){		$('#modify_passwd').val('');		$('#modify_userId').val('');	});		$('#deprecatedUserDialog').on('hide',function(){		$('#deprecated_user').val('');	});		$('#activateUserDialog').on('hide',function(){		$('#activate_user').val('');	});		//修改密码按钮	$('.modifyA').on('click', function () {		var userId = $(this).attr('tag');		$('#modify_userId').val(userId);    });		$("#modifyPasswdBtn").on('click',function(){		if($('#modify_passwd').val()==''){			alert('请输入密码');			return;		}				$.ajax({	    	async:false,	    	type:'post',	    	url:'/userMgr/modifyPasswd',	    	dataType : 'json',	    	data:$("#modifyPasswdForm").serialize(),	    	success:function(data){	    		if(data&&data.optFlag==true){	    			$('#modify_passwd').val('');	    			$('#modify_userId').val('');	    			alert(data.message);	    			$("#modifyPasswdDialog").modal('hide');	    		}else if(data&&data.optFlag==false){	    			alert(data.message);	    		}else{	    			alert("error data format");	    		}	    	}		});	});		//新增用户按钮	$('#newUserBtn').on('click',function(){		if($("#new_username").val()==''||$("#new_passwd").val()==''){			alert('用户名或者密码不能为空');			return;		}		if($.trim($("#new_username").val())==''){			alert('用户名不能为空格');			return;		}		$.ajax({	    	async:false,	    	type:'post',	    	url:'/userMgr/insertNewUser',	    	dataType : 'json',	    	data:$("#newUserForm").serialize(),	    	success:function(data){	    		if(data&&data.optFlag==true){	    			$("#new_username").val('');	    			$("#new_passwd").val('');	    			alert(data.message);	    			$("#newUserDialog").modal('hide');	    			window.location.reload(true);	    		}else if(data&&data.optFlag==false){	    			alert(data.message);	    		}else{	    			alert("error data format");	    		}	    	}		});	});		$('#deprecatedUserBtn').on('click',function(){		if ($('#deprecated_user').val()==''){			alert('用户名不能为空');			return;		}		if($.trim($("#deprecated_user").val())==''){			alert('用户名不能为空格');			return;		}		$.ajax({	    	async:false,	    	type:'post',	    	url:'/userMgr/deprecatedUser',	    	dataType : 'json',	    	data:$("#deprecatedUserForm").serialize(),	    	success:function(data){	    		if(data&&data.optFlag==true){	    			$("#deprecated_user").val('');	    			alert(data.message);	    			$("#deprecatedUserDialog").modal('hide');	    			window.location.reload(true);	    		}else if(data&&data.optFlag==false){	    			alert(data.message);	    		}else{	    			alert("error data format");	    		}	    	}		});	});		$('#activateUserBtn').on('click',function(){		if ($('#activate_user').val()==''){			alert('用户名不能为空');			return;		}		if($.trim($("#activate_user").val())==''){			alert('用户名不能为空格');			return;		}		$.ajax({	    	async:false,	    	type:'post',	    	url:'/userMgr/activateUser',	    	dataType : 'json',	    	data:$("#activateUserForm").serialize(),	    	success:function(data){	    		if(data&&data.optFlag==true){	    			$("#activate_user").val('');	    			alert(data.message);	    			$("#activateUserDialog").modal('hide');	    			window.location.reload(true);	    		}else if(data&&data.optFlag==false){	    			alert(data.message);	    		}else{	    			alert("error data format");	    		}	    	}		});	});});