<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="org.jzw.yxbs.dao.UserMgrDao">	<sql id="userMgrCondition">		<if test="username != null">			and username like concat('%',#{escapeUserName},'%')		</if>		<if test="userId != null">			and id = #{userId}		</if>		<if test="role != null">			and role = #{role}		</if>		<if test="isenable != null">			and isenable = #{isenable}		</if>		<if test="beginDate != null">			and createtime <![CDATA[ >= ]]>#{beginDate}		</if>		<if test="endDate != null">			and createtime <![CDATA[ < ]]>#{endDate}		</if>	</sql>	<select id="findUsers" resultType="org.jzw.yxbs.domain.User">		select		id userId,username username,passwd passwd,role role,isenable isenable,		createtime createDate,modifytime		modifyDate		from		sys_user		<where>			<include refid="userMgrCondition" />		</where>		<if test="pageIndex != null and pageSize != null">			limit #{pageBeginIndex},#{pageSize}		</if>	</select>	<select id="findUsersCount" resultType="java.lang.Integer">		select		count(1)		from		sys_user		<where>			<include refid="userMgrCondition" />		</where>	</select>	<select id="getRoleList" resultType="java.lang.String">		select		dictvalue		from		sys_dict		<where>			dicttable = 'sys_user' and dictcolumn ='role'		</where>	</select>	<select id="findUserAttributeVal" resultType="java.lang.String">		select		attributeval		from		sys_user_info		<where>			username = #{username} and attributeid = #{userInfoAttrid}		</where>	</select>	<update id="updateUserAttributeVal">		update		sys_user_info		set attributeval = #{userInfoAttrval}		<where>			username = #{username} and attributeid = #{userInfoAttrid}		</where>	</update>	<insert id="insertNewUserInfo">		insert into		sys_user_info(username,attributeid,attributeval)		values		(#{username},#{userInfoAttrid},#{userInfoAttrval})	</insert>	<insert id="insertNewUserDefaultLoginTime">		insert into		sys_user_info(username,attributeid,attributeval)		values		(#{username},#{userInfoAttrid},date_format(now(),'%Y-%m-%d %H:%i:%s'))	</insert>		<select id="findUserById" resultType="org.jzw.yxbs.domain.User">		select		id userId,username username,passwd passwd,role role,isenable isenable,		createtime createDate,modifytime		modifyDate		from		sys_user		<where>			id = #{userId}		</where>	</select>		<delete id="deleteUser">		delete from sys_user		<where>			username=#{username}		</where>	</delete>		<delete id="deleteUserInfo">		delete from sys_user_info		<where>			username=#{username}		</where>	</delete>		<update id="deprecatedUser">		update sys_user		set isenable = 0		<where>			username = #{username}		</where>	</update>		<update id="activateUser">		update sys_user		set isenable = 1		<where>			username = #{username}		</where>	</update>		<update id="modifyPasswd">		update sys_user		set passwd = #{passwd}		<where>			username = #{username}		</where>	</update>		<insert id="insertNewUser">		insert into		sys_user(username,passwd,role,isenable,createtime,modifytime)		values		(#{username},#{passwd},'ROLE_ADMIN',1,now(),now())	</insert>		<select id="getUserCountByName" resultType="java.lang.Integer">		select count(1)		from sys_user		<where>			username = #{username}		</where>			</select>	</mapper> 